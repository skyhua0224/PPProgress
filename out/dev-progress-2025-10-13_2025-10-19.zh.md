# 开发进展 — 主仓与子模块（自 2025-10-13 至 2025-10-19）

扫描的模块: ProjectPrinting, admin, frontend, backend
提交总数: 18
触达文件总数: 95
行变更合计 +/-: +6153 / -1088

## 按模块汇总
- ProjectPrinting (.): commits=1, files=5, +1886/-99
- admin (admin): commits=0, files=0, +0/-0
- frontend (frontend): commits=3, files=36, +2443/-683
- backend (backend): commits=14, files=54, +1824/-306

## 顶层目录热力（按模块）
- ProjectPrinting:
  - docs: 1985
- frontend:
  - src/pages-sub/filePrinting: 668
  - src/pages-sub/checkout: 645
  - src/components/StoreSelectorItem.vue: 333
  - src/pages/order: 269
  - src/service/storeService.ts: 226
  - src/components/StoreSelectorPopup.vue: 212
  - src/service/storeMetricsService.ts: 192
  - src/components/StoreCompactCard.vue: 178
  - src/components/ModePill.vue: 152
  - src/components/PaymentFooter.vue: 84
  - src/store/metrics.ts: 66
  - src/components/BusynessSignal.vue: 48
  - src/components/CategoryChip.vue: 30
  - src/pages-sub/payment: 11
  - src/types/components.d.ts: 7
- backend:
  - src/main/java: 1994
  - src/main/resources: 136
  - src/test/java: 0

## 提交主题（每模块最多 10 条）
- ProjectPrinting:
  - [undefined] docs: 新增履约规则与店铺负载 Mockup，补充基础到店免费规则并更新订单状态文档
- frontend:
  - [undefined] feat: 优化排队信息显示，修复 uploadPrinting 批量设置失效的问题
  - [undefined] feat: 实现排队信息显示/远程履约支持标记，优化 uploadPrinting 上传和提交逻辑，替换排队与忙碌程度信息 mock 数据并对接后端
  - [undefined] feat: 重构所有与店铺选择有关的样式显示以及功能,新增查看店铺繁忙程度&店铺基础履约种类的功能
- backend:
  - [undefined] fix: getOrderStats 修正订单统计逻辑 — 待处理仅计 PENDING_PROCESS；处理中改为显式状态列表（PRINTING/READY_FOR_PICKUP/DELIVERING）；异常改为判断 OrderStatus.EXCEPTION；调整调试日志输出
  - [undefined] fix: getOrderStats 使用服务器本地时间计算今日范围；抽取权限过滤为 permissionSpec 并调整统计逻辑；按权限分别统计今日总单/待处理/处理中/异常订单；新增调试打印便于定位查询范围与权限
  - [undefined] fix: getOrderStats 使用 UTC 计算今日时间范围以匹配数据库存储；为 Store.fulfillmentSettings 添加 @JsonIgnore，防止 LAZY 加载时序列化问题
  - [undefined] feat: 添加管理员模拟打印完成/失败接口并实现；手动履约改为发送打印队列（状态改为 PRINTING）并支持 PENDING_PROCESS；将 EXCEPTION 纳入处理状态列表；在 OrderService 接口声明 mockPrint 方法，修复 printSpec 不出现的问题
  - [undefined] refactor: 移除订单排队位置相关代码
  - [undefined] feat: 调整每张打印耗时为 3 秒
  - [undefined] refactor: 用总页数替换基于份数的 ETA 计算并新增页数统计查询
  - [undefined] fix: 修复客户端履约方式接口映射，添加 {storeId} 路径参数以匹配 @PathVariable
  - [undefined] feat: 在店铺列表中添加 supportsRemoteDelivery 并支持按该字段筛选 refactor: 为 Store 实体添加 fulfillmentSettings 关联及 getter/setter feat: 新增 StoreFulfillmentSettingRepository 查询远程配送能力的方法 fix: OrderServiceImpl#createOrder 增加 items 校验与过滤（移除 pageCount=0/缺少 printSpec 的项），并在分布式锁创建时防止 NPE
  - [undefined] feat: 将订单 pricing 快照迁移到关系表并在系统中集成 order_items
